"use strict";
(() => {
  // widget-src/assets/svg/down_arrow.tsx
  var down_arrow_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve">
<g>
	<path d="M0,0v54h54V0H0z M52,52H2V2h50V52z"/>
	<path d="M37.707,31.207l-1.414-1.414L28,38.086V13.5c0-0.553-0.448-1-1-1s-1,0.447-1,1v24.586l-8.293-8.293l-1.414,1.414L27,41.914
		L37.707,31.207z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/left_arrow.tsx
  var left_arrow_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve">
<g>
	<path d="M0,0v54h54V0H0z M52,52H2V2h50V52z"/>
	<path d="M23.707,36.293L15.414,28H40c0.552,0,1-0.447,1-1s-0.448-1-1-1H15.414l8.293-8.293l-1.414-1.414L11.586,27l10.707,10.707
		L23.707,36.293z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/node-add.tsx
  var node_add_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 511.999 511.999" style="enable-background:new 0 0 511.999 511.999;" xml:space="preserve">
<polygon style="fill:#CFF09E;" points="96.838,469.769 109.281,64.007 415.16,330.906 228.277,336.788 "/>
<g>
	<path style="fill:#507C5C;" d="M424.072,320.69L118.194,53.791c-3.948-3.446-9.53-4.306-14.334-2.211
		c-4.805,2.096-7.971,6.774-8.131,12.011L83.287,469.353c-0.171,5.571,3.084,10.68,8.208,12.876
		c1.723,0.739,3.539,1.098,5.341,1.098c3.552,0,7.045-1.398,9.645-4.028l90.792-91.858l50.786,116.421
		c1.439,3.296,4.126,5.886,7.473,7.199c1.594,0.625,3.274,0.937,4.954,0.937c1.848,0,3.695-0.378,5.421-1.131l64.367-28.079
		c6.865-2.994,10.001-10.985,7.007-17.849l-31.989-73.329c-2.995-6.863-10.986-10.002-17.848-7.006
		c-6.865,2.994-10.001,10.986-7.007,17.849l26.569,60.902l-39.514,17.237l-49.693-113.918l16.315-16.506l181.472-5.712
		c5.571-0.175,10.468-3.742,12.343-8.992C429.801,330.216,428.272,324.355,424.072,320.69z M237.031,322.948l-50.268-115.235
		c-2.995-6.863-10.986-10.002-17.848-7.006c-6.865,2.994-10.001,10.985-7.007,17.849l50.268,115.235L111.447,435.7l10.506-342.641
		l258.297,225.38L237.031,322.948z"/>
	<path style="fill:#507C5C;" d="M350.262,171.972H306.59c-7.487,0-13.558-6.07-13.558-13.558V121.38h-37.033
		c-7.487,0-13.558-6.07-13.558-13.558V64.149c0-7.488,6.071-13.558,13.558-13.558h37.033V13.558C293.032,6.07,299.103,0,306.59,0
		h43.672c7.487,0,13.558,6.07,13.558,13.558v37.033h37.033c7.487,0,13.558,6.07,13.558,13.558v43.672
		c0,7.488-6.071,13.558-13.558,13.558h-50.591c-7.487,0-13.558-6.07-13.558-13.558s6.071-13.558,13.558-13.558h37.033V77.707
		h-37.033c-7.487,0-13.558-6.07-13.558-13.558V27.116h-16.556v37.033c0,7.488-6.071,13.558-13.558,13.558h-37.033v16.556h37.033
		c7.487,0,13.558,6.07,13.558,13.558v37.033h30.114c7.487,0,13.558,6.07,13.558,13.558
		C363.821,165.901,357.749,171.972,350.262,171.972z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/right_arrow.tsx
  var right_arrow_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve">
<g>
	<path d="M0,0v54h54V0H0z M52,52H2V2h50V52z"/>
	<path d="M13,28h24.586l-8.293,8.293l1.414,1.414L41.414,27L30.707,16.293l-1.414,1.414L37.586,26H13c-0.552,0-1,0.447-1,1
		S12.448,28,13,28z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/up_arrow.tsx
  var up_arrow_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 18.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 54 54" style="enable-background:new 0 0 54 54;" xml:space="preserve">
<g>
	<path d="M0,0v54h54V0H0z M52,52H2V2h50V52z"/>
	<path d="M26,15.914V40.5c0,0.553,0.448,1,1,1s1-0.447,1-1V15.914l8.293,8.293l1.414-1.414L27,12.086L16.293,22.793l1.414,1.414
		L26,15.914z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/play-button.tsx
  var play_button_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 60 60" style="enable-background:new 0 0 60 60;" xml:space="preserve">
<g>
	<path d="M45.563,29.174l-22-15c-0.307-0.208-0.703-0.231-1.031-0.058C22.205,14.289,22,14.629,22,15v30
		c0,0.371,0.205,0.711,0.533,0.884C22.679,45.962,22.84,46,23,46c0.197,0,0.394-0.059,0.563-0.174l22-15
		C45.836,30.64,46,30.331,46,30S45.836,29.36,45.563,29.174z M24,43.107V16.893L43.225,30L24,43.107z"/>
	<path d="M30,0C13.458,0,0,13.458,0,30s13.458,30,30,30s30-13.458,30-30S46.542,0,30,0z M30,58C14.561,58,2,45.439,2,30
		S14.561,2,30,2s28,12.561,28,28S45.439,58,30,58z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/svg/plus_symbol.tsx
  var plus_symbol_default = `<?xml version="1.0" encoding="iso-8859-1"?>
<!-- Generator: Adobe Illustrator 19.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 viewBox="0 0 490 490" style="enable-background:new 0 0 490 490;" xml:space="preserve">
<g>
	<g>
		<g>
			<path d="M227.8,174.1v53.7h-53.7c-9.5,0-17.2,7.7-17.2,17.2s7.7,17.2,17.2,17.2h53.7v53.7c0,9.5,7.7,17.2,17.2,17.2
				s17.1-7.7,17.1-17.2v-53.7h53.7c9.5,0,17.2-7.7,17.2-17.2s-7.7-17.2-17.2-17.2h-53.7v-53.7c0-9.5-7.7-17.2-17.1-17.2
				S227.8,164.6,227.8,174.1z"/>
			<path d="M71.7,71.7C25.5,118,0,179.5,0,245s25.5,127,71.8,173.3C118,464.5,179.6,490,245,490s127-25.5,173.3-71.8
				C464.5,372,490,310.4,490,245s-25.5-127-71.8-173.3C372,25.5,310.5,0,245,0C179.6,0,118,25.5,71.7,71.7z M455.7,245
				c0,56.3-21.9,109.2-61.7,149s-92.7,61.7-149,61.7S135.8,433.8,96,394s-61.7-92.7-61.7-149S56.2,135.8,96,96s92.7-61.7,149-61.7
				S354.2,56.2,394,96S455.7,188.7,455.7,245z"/>
		</g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
	<g>
	</g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
`;

  // widget-src/assets/logic/script.ts
  var ScriptBlock = class {
    constructor({
      onExecute,
      displayName,
      displayColor
    }) {
      this.onExecute = onExecute;
      this.targetNodeIdMap = /* @__PURE__ */ new Map();
      this.displayName = displayName;
      this.displayColor = displayColor;
    }
    addTargetNodeId(alias, nodeIds) {
      this.targetNodeIdMap.set(alias, nodeIds);
    }
  };
  var Script = class {
    constructor({
      blocks,
      triggers,
      aliases,
      variables
    }) {
      this.blocks = blocks;
      this.triggers = triggers;
      this.aliases = aliases;
      this.variables = variables;
    }
  };

  // widget-src/assets/logic/test_scripts.ts
  var verticalMoveBlock = new ScriptBlock({
    onExecute: (node) => node.y += 5,
    displayName: "Move vertically",
    displayColor: "#FFFFFF"
  });
  var upTestScript = new Script({
    blocks: [
      verticalMoveBlock
    ],
    triggers: [0 /* FrameUpdate */],
    aliases: /* @__PURE__ */ new Map(),
    variables: /* @__PURE__ */ new Map()
  });

  // widget-src/code.tsx
  var { widget } = figma;
  var { useSyncedState, useSyncedMap, usePropertyMenu, AutoLayout, Text, SVG, Rectangle } = widget;
  function Arrow({
    svg,
    movableShapeIds,
    moveFn
  }) {
    return /* @__PURE__ */ figma.widget.h(SVG, {
      src: svg,
      onClick: () => {
        for (const node_id of movableShapeIds) {
          const node = figma.getNodeById(node_id);
          if (!node) {
            console.error(`no node ${node_id} found`);
            return;
          }
          if (node.type !== "FRAME") {
            console.error(`${node_id} is not a frame`);
            return;
          }
          moveFn(node);
        }
      }
    });
  }
  function Plus({
    nodeToScripts
  }) {
    return /* @__PURE__ */ figma.widget.h(SVG, {
      src: plus_symbol_default,
      width: 50,
      height: 50,
      onClick: () => {
        const currSelection = figma.currentPage.selection;
        if (currSelection.length < 1) {
          console.log("Nothing selected to add script to");
        } else if (currSelection.length > 1) {
          console.log("More than 1 item selected");
        } else {
          const node = currSelection[0];
          console.log("Adding to node", node.id);
          if (!nodeToScripts.get(node.id)) {
            console.log("Adding empty array for node", node.id);
            nodeToScripts.set(node.id, []);
          }
          const currScripts = nodeToScripts.get(node.id);
          nodeToScripts.set(node.id, currScripts.concat(upTestScript));
        }
      }
    });
  }
  function Widget() {
    const [movableShapes, setMovableShapes] = useSyncedState("movableShape", []);
    const nodeIdToScripts = useSyncedMap("nodeToScripts");
    if (movableShapes.length > 0) {
      usePropertyMenu(
        [
          {
            itemType: "action",
            propertyName: "reset",
            tooltip: "Reset",
            icon: `<svg width="22" height="15" viewBox="0 0 22 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M11.9026 1.43168C12.1936 1.47564 12.4822 1.54098 12.7663 1.62777L12.7719 1.62949C14.0176 2.0114 15.109 2.78567 15.8858 3.83854L15.8918 3.84665C16.5473 4.73808 16.9484 5.78867 17.058 6.88508L14.0863 4.88858L13.3259 6.02047L17.3852 8.74774L17.9079 9.09894L18.2994 8.60571L21.0056 5.19662L19.9376 4.34879L18.3531 6.34479C18.3424 6.27511 18.3306 6.20563 18.3179 6.13636C18.1135 5.02233 17.6601 3.96334 16.9851 3.04274L16.9791 3.03462C16.0303 1.74427 14.6956 0.794984 13.1714 0.326388L13.1658 0.32466C12.8171 0.217755 12.4627 0.137298 12.1055 0.0832198C10.899 -0.0994351 9.66061 0.0188515 8.50099 0.435448L8.4947 0.437711C7.42511 0.823053 6.46311 1.44778 5.6774 2.25801C5.38576 2.55876 5.11841 2.88506 4.87886 3.23416C4.85856 3.26376 4.83845 3.29351 4.81854 3.32343L5.94262 4.08294L5.94802 4.07484C5.96253 4.0531 5.97717 4.03146 5.99195 4.00993C6.71697 2.95331 7.75331 2.15199 8.95541 1.72013L8.9617 1.71788C9.33245 1.58514 9.71301 1.48966 10.098 1.43156C10.6957 1.34135 11.3039 1.34123 11.9026 1.43168ZM3.70034 6.39429L0.994141 9.80338L2.06217 10.6512L3.64663 8.65521C3.65741 8.72489 3.66916 8.79437 3.68187 8.86364C3.88627 9.97767 4.33964 11.0367 5.01467 11.9573L5.02063 11.9654C5.96945 13.2557 7.30418 14.205 8.82835 14.6736L8.83398 14.6753C9.18281 14.7823 9.53732 14.8628 9.89464 14.9168C11.101 15.0994 12.3393 14.9811 13.4988 14.5646L13.5051 14.5623C14.5747 14.1769 15.5367 13.5522 16.3224 12.742C16.614 12.4413 16.8813 12.115 17.1209 11.7659C17.1412 11.7363 17.1613 11.7065 17.1812 11.6766L16.0571 10.9171L16.0518 10.9252C16.0372 10.9469 16.0225 10.9686 16.0078 10.9902C15.2827 12.0467 14.2464 12.848 13.0444 13.2799L13.0381 13.2821C12.6673 13.4149 12.2868 13.5103 11.9018 13.5684C11.3041 13.6587 10.6958 13.6588 10.0971 13.5683C9.8062 13.5244 9.51754 13.459 9.23347 13.3722L9.22784 13.3705C7.98212 12.9886 6.89078 12.2143 6.11393 11.1615L6.10795 11.1534C5.45247 10.2619 5.05138 9.21133 4.94181 8.11492L7.91342 10.1114L8.6739 8.97953L4.61459 6.25226L4.09188 5.90106L3.70034 6.39429Z" fill="white"/>
          </svg>
          `
          }
        ],
        () => {
          setMovableShapes([]);
        }
      );
    }
    const INCREMENT = 5;
    return /* @__PURE__ */ figma.widget.h(AutoLayout, {
      verticalAlignItems: "center",
      spacing: 8,
      padding: 16,
      cornerRadius: 8,
      fill: "#FFFFFF",
      stroke: "#E6E6E6"
    }, /* @__PURE__ */ figma.widget.h(Plus, {
      nodeToScripts: nodeIdToScripts
    }), /* @__PURE__ */ figma.widget.h(SVG, {
      src: play_button_default,
      width: 50,
      height: 50,
      onClick: () => {
        console.log("test");
        console.log(nodeIdToScripts.entries);
        nodeIdToScripts.entries().forEach((entry) => {
          const nodeId = entry[0];
          const scripts = entry[1];
        });
      }
    }), /* @__PURE__ */ figma.widget.h(SVG, {
      src: node_add_default,
      width: 50,
      height: 50,
      onClick: () => {
        console.log(figma.currentPage.selection);
        setMovableShapes(figma.currentPage.selection.map(({ id }) => id));
      }
    }), /* @__PURE__ */ figma.widget.h(Arrow, {
      svg: down_arrow_default,
      moveFn: (node) => node.y += INCREMENT,
      movableShapeIds: movableShapes
    }), /* @__PURE__ */ figma.widget.h(Arrow, {
      svg: up_arrow_default,
      moveFn: (node) => node.y -= INCREMENT,
      movableShapeIds: movableShapes
    }), /* @__PURE__ */ figma.widget.h(Arrow, {
      svg: left_arrow_default,
      moveFn: (node) => node.x -= INCREMENT,
      movableShapeIds: movableShapes
    }), /* @__PURE__ */ figma.widget.h(Arrow, {
      svg: right_arrow_default,
      moveFn: (node) => node.x += INCREMENT,
      movableShapeIds: movableShapes
    }));
  }
  widget.register(Widget);
})();
